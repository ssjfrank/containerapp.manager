# ContainerManager.Service - Environment Configuration
# Copy this file to .env and fill in your actual values
# DO NOT commit .env to version control

# ============================================================================
# Manager Settings
# ============================================================================

# How often to check queues (in seconds)
ManagerSettings__PollingIntervalSeconds=30

# How long queues must be idle before stopping container (in minutes)
ManagerSettings__IdleTimeoutMinutes=10

# How long to wait for receivers after restart (in minutes)
ManagerSettings__RestartVerificationTimeoutMinutes=5

# Delay between scale-down and scale-up during restart (in seconds)
ManagerSettings__RestartDelaySeconds=5

# Queue to Container Mappings (JSON format)
# Format: {"container-app-name": ["queue.name.1", "queue.name.2"]}
ManagerSettings__QueueContainerMappings={"container-app-1": ["queue.app1.requests", "queue.app1.events"], "container-app-2": ["queue.app2.requests"]}

# Email recipient(s) for notifications
# Can be a single email or multiple emails separated by semicolon or comma
# Examples:
#   Single: ops-team@example.com
#   Multiple: ops-team@example.com;devops@example.com
ManagerSettings__NotificationEmailRecipient=ops-team@example.com

# ============================================================================
# TIBCO EMS Settings
# ============================================================================

# EMS Server URL (format: tcp://hostname:port or ssl://hostname:port)
EmsSettings__ServerUrl=tcp://localhost:7222

# EMS Username
EmsSettings__Username=admin

# EMS Password
EmsSettings__Password=

# Notification Queue Name (where notifications are published)
EmsSettings__NotificationQueueName=NOTIFICATION.QUEUE

# ============================================================================
# SSL Configuration (only used when ServerUrl starts with ssl://)
# ============================================================================

# SSL target hostname for certificate validation (optional)
# If not specified, hostname from ServerUrl will be used
#EmsSettings__SslTargetHostName=ems-server.example.com

# Enable SSL trace/debugging (optional, default: false)
# Useful for troubleshooting SSL connection issues
#EmsSettings__SslTrace=false

# Path to client certificate file for mutual TLS (optional)
# Use absolute path or path relative to application directory
#EmsSettings__ClientCertificatePath=/path/to/client-cert.p12

# Password for client certificate (optional)
#EmsSettings__ClientCertificatePassword=

# Path to trust store containing server certificates (optional)
# Use absolute path or path relative to application directory
#EmsSettings__TrustStorePath=/path/to/truststore.jks

# Password for trust store (optional)
#EmsSettings__TrustStorePassword=

# Whether to verify server hostname against certificate (default: true)
# Set to false only for testing with self-signed certificates
#EmsSettings__VerifyHostName=true

# Whether to verify server certificate (default: true)
# Set to false only for testing with self-signed certificates
#EmsSettings__VerifyServerCertificate=true

# ============================================================================
# Azure Settings (User-Assigned Managed Identity)
# ============================================================================

# Azure Subscription ID
AzureSettings__SubscriptionId=

# Azure Resource Group Name
AzureSettings__ResourceGroupName=

# User-Assigned Managed Identity Client ID
# This is the Client ID (Application ID) of your user-assigned managed identity
# Example: 12345678-1234-1234-1234-123456789abc
AzureSettings__ManagedIdentityClientId=

# ============================================================================
# Logging Settings
# ============================================================================

# Minimum log level (Debug, Information, Warning, Error)
Serilog__MinimumLevel__Default=Information

# Override log levels for Microsoft libraries
Serilog__MinimumLevel__Override__Microsoft=Warning
Serilog__MinimumLevel__Override__System=Warning

# ============================================================================
# Health Check Settings
# ============================================================================

# Enable health check endpoint (true/false)
EnableHealthChecks=false

# ============================================================================
# Example Configurations
# ============================================================================

# Development Example (TCP):
# EmsSettings__ServerUrl=tcp://dev-ems-server:7222
# ManagerSettings__NotificationEmailRecipient=dev-team@example.com
# AzureSettings__SubscriptionId=12345678-1234-1234-1234-123456789abc
# AzureSettings__ResourceGroupName=rg-dev-container-apps
# AzureSettings__ManagedIdentityClientId=87654321-4321-4321-4321-cba987654321
# Serilog__MinimumLevel__Default=Debug

# Production Example (SSL with mutual TLS):
# EmsSettings__ServerUrl=ssl://prod-ems-server:7243
# EmsSettings__SslTargetHostName=prod-ems-server.example.com
# EmsSettings__ClientCertificatePath=/certs/client-cert.p12
# EmsSettings__ClientCertificatePassword=secret123
# EmsSettings__TrustStorePath=/certs/truststore.jks
# EmsSettings__VerifyHostName=true
# EmsSettings__VerifyServerCertificate=true
# ManagerSettings__NotificationEmailRecipient=ops-team@example.com;oncall@example.com
# AzureSettings__SubscriptionId=12345678-1234-1234-1234-123456789abc
# AzureSettings__ResourceGroupName=rg-prod-container-apps
# AzureSettings__ManagedIdentityClientId=87654321-4321-4321-4321-cba987654321
# Serilog__MinimumLevel__Default=Information

# SSL Testing Example (self-signed certificates):
# EmsSettings__ServerUrl=ssl://test-ems-server:7243
# EmsSettings__VerifyHostName=false
# EmsSettings__VerifyServerCertificate=false
# EmsSettings__SslTrace=true
# ManagerSettings__NotificationEmailRecipient=test@example.com
# AzureSettings__SubscriptionId=12345678-1234-1234-1234-123456789abc
# AzureSettings__ResourceGroupName=rg-test-container-apps
# AzureSettings__ManagedIdentityClientId=87654321-4321-4321-4321-cba987654321
# Serilog__MinimumLevel__Default=Debug